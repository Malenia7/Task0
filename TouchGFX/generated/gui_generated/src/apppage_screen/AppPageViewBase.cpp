/*********************************************************************************/
/********** THIS FILE IS GENERATED BY TOUCHGFX DESIGNER, DO NOT MODIFY ***********/
/*********************************************************************************/
#include <gui_generated/apppage_screen/AppPageViewBase.hpp>
#include <touchgfx/Color.hpp>
#include <images/BitmapDatabase.hpp>

AppPageViewBase::AppPageViewBase() :
    updateItemCallback(this, &AppPageViewBase::updateItemCallbackHandler)
{
    __background.setPosition(0, 0, 320, 240);
    __background.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    add(__background);

    BackApp.setXY(40, 0);
    BackApp.setBitmap(touchgfx::Bitmap(BITMAP_TOOL_ID));
    add(BackApp);

    AppScroll.setPosition(40, 0, 240, 240);
    AppScroll.setHorizontal(false);
    AppScroll.setCircular(true);
    AppScroll.setEasingEquation(touchgfx::EasingEquations::backEaseOut);
    AppScroll.setSwipeAcceleration(10);
    AppScroll.setDragAcceleration(10);
    AppScroll.setNumberOfItems(7);
    AppScroll.setSelectedItemOffset(0);
    AppScroll.setDrawableSize(64, 0);
    AppScroll.setDrawables(AppScrollListItems, updateItemCallback);
    AppScroll.animateToItem(0, 0);
    add(AppScroll);

    FrontApp.setBitmap(touchgfx::Bitmap(BITMAP_OVERLAY_240X240_ID));
    FrontApp.setPosition(40, 0, 240, 240);
    FrontApp.setScalingAlgorithm(touchgfx::ScalableImage::NEAREST_NEIGHBOR);
    add(FrontApp);
}

AppPageViewBase::~AppPageViewBase()
{

}

void AppPageViewBase::setupScreen()
{
    AppScroll.initialize();
    for (int i = 0; i < AppScrollListItems.getNumberOfDrawables(); i++)
    {
        AppScrollListItems[i].initialize();
    }
}

void AppPageViewBase::updateItemCallbackHandler(touchgfx::DrawableListItemsInterface* items, int16_t containerIndex, int16_t itemIndex)
{
    if (items == &AppScrollListItems)
    {
        touchgfx::Drawable* d = items->getDrawable(containerIndex);
        MenuElement* cc = (MenuElement*)d;
        AppScrollUpdateItem(*cc, itemIndex);
    }
}
